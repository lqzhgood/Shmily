import{_ as s,c as a,o as i,R as t}from"./chunks/framework.xvtSDt2M.js";const E=JSON.parse('{"title":"表情","description":"","frontmatter":{},"headers":[],"relativePath":"guide/use/msg/other/emotion.md","filePath":"guide/use/msg/other/emotion.md","lastUpdated":1705114684000}'),e={name:"guide/use/msg/other/emotion.md"},n=t(`<h1 id="表情" tabindex="-1">表情 <a class="header-anchor" href="#表情" aria-label="Permalink to &quot;表情&quot;">​</a></h1><p>如果您要对表情进行统计，根据<a href="./../custom.html">数据模式</a>不同，需要遵循以下规则</p><h2 id="约定" tabindex="-1">约定 <a class="header-anchor" href="#约定" aria-label="Permalink to &quot;约定&quot;">​</a></h2><table><thead><tr><th>key</th><th>value</th><th>举例</th><th>备注</th></tr></thead><tbody><tr><td>packName</td><td>表情包 名称</td><td>阿狸过新年</td><td>如果不知道或不想写，需要硬编码为 &quot;其他&quot;</td></tr><tr><td>desc</td><td>表情 名称</td><td>饺子</td><td>如果不知道或不想写，需要硬编码为 &quot;未知&quot;</td></tr><tr><td>mark</td><td>表情包 描述</td><td>温暖可爱的阿狸新年新装扮，让我们一起把春节、情人节和元宵节都变得萌萌哒</td><td><strong>可选</strong>, MobileQQ 官方提供这个值</td></tr></tbody></table><p>文件名使用 MD5 小写，这样可以减少重复文件占用的空间，而且如果消息类型是图片，也可以通过 md5 修正类型为表情</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>./data/qq-android-lqzh-20230101/emoticon/阿狸过新年/4793ef7525e16fd692ec1620ac19c4fd.gif</span></span></code></pre></div><h2 id="简单模式-从-html-字段统计" tabindex="-1">简单模式 (从 HTML 字段统计) <a class="header-anchor" href="#简单模式-从-html-字段统计" aria-label="Permalink to &quot;简单模式 (从 HTML 字段统计)&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我是简单的一个表情，&lt;img title=&#39;[阿狸过新年-饺子]&#39; alt=&#39;[阿狸过新年-饺子]&#39; src=&#39;./data/qq-android/emoticon/阿狸过新年/4793ef7525e16fd692ec1620ac19c4fd.gif&#39; /&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我是简单的一个表情，[阿狸过新年-饺子]&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://github.com/lqzhgood/Shmily-Show" target="_blank" rel="noreferrer">Show</a> 会使用 <a href="https://github.com/lqzhgood/Shmily-Show/blob/main/memoryweb/scripts/msgHandle/statistics/contrast/emotion/lib/utils.js" target="_blank" rel="noreferrer">countEmotionByHtml</a> 函数进行统计</p><h2 id="组件模式-从特定字段进行统计" tabindex="-1">组件模式 (从特定字段进行统计) <a class="header-anchor" href="#组件模式-从特定字段进行统计" aria-label="Permalink to &quot;组件模式 (从特定字段进行统计)&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 仅为示例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ...</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &quot;$source&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;webUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./emoticon/阿狸过新年/4793ef7525e16fd692ec1620ac19c4fd.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;packName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;阿狸过新年&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;desc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;饺子&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;mark&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;温暖可爱的阿狸新年新装扮，让我们一起把春节、情人节和元宵节都变得萌萌哒！&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;rootPath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;qq-android-lqzh-20230101&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>可以参考 <a href="https://github.com/lqzhgood/Shmily-Show/blob/main/memoryweb/scripts/msgHandle/statistics/contrast/emotion/lib/wechat.js" target="_blank" rel="noreferrer">wechat</a> 的函数进行统计</p><h2 id="新类型" tabindex="-1">新类型 <a class="header-anchor" href="#新类型" aria-label="Permalink to &quot;新类型&quot;">​</a></h2><p>如果是新的 <code>Get</code> 类型，需要在 <a href="https://github.com/lqzhgood/Shmily-Show/blob/main/memoryweb/scripts/msgHandle/statistics/contrast/emotion/lib/index.js" target="_blank" rel="noreferrer">这里</a> 补充统计函数</p><h2 id="表情数据的一些说明" tabindex="-1">表情数据的一些说明 <a class="header-anchor" href="#表情数据的一些说明" aria-label="Permalink to &quot;表情数据的一些说明&quot;">​</a></h2><h3 id="正向导出" tabindex="-1">正向导出 <a class="header-anchor" href="#正向导出" aria-label="Permalink to &quot;正向导出&quot;">​</a></h3><p>Wechat、MobileQQ 可以直接从数据库中获取表情的 <code>packName</code>、<code>desc</code> 等值，这样的就很简单，直接导出即可。</p><h3 id="反向匹配" tabindex="-1">反向匹配 <a class="header-anchor" href="#反向匹配" aria-label="Permalink to &quot;反向匹配&quot;">​</a></h3><p>如 PC-QQ 无法导出表情类型的消息，更无法获取 <code>packName</code>、<code>desc</code>，所以所有表情都被视为图片类型被导出</p><p>这种情况可以自己收集表情包，根据表情的 MD5 去匹配导出的图片，从而修正图片类型并补充 <code>packName</code>、<code>desc</code>。</p><p>这是个苦力活，可以参考 <a href="https://github.com/lqzhgood/Shmily-Get-QQ-PC_MHT/tree/main/merger/data/qq-pc/face" target="_blank" rel="noreferrer">Shmily-Get-QQ-PC-MHT</a> 的表情文件集合，和 <a href="https://github.com/lqzhgood/Shmily-Show/blob/main/docs/modify-msg.md" target="_blank" rel="noreferrer">Show-Modify-msg</a> 辅助的实现。</p>`,21),h=[n];function l(o,p,r,d,k,c){return i(),a("div",null,h)}const m=s(e,[["render",l]]);export{E as __pageData,m as default};
